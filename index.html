
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Last Hand</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rye&family=VT323&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'VT323', monospace;
        background-color: #1b2e1f; /* Dark Green Base */
        color: #f3e5ab; /* Parchment Text */
        overflow-x: hidden;
        font-size: 1.25rem;
        user-select: none;
        -webkit-user-select: none;
      }
      
      h1, h2, h3, .western-font {
        font-family: 'Rye', serif;
      }

      .pixel-corners {
        clip-path: polygon(
          0px 4px, 4px 4px, 4px 0px,
          calc(100% - 4px) 0px, calc(100% - 4px) 4px, 100% 4px,
          100% calc(100% - 4px), calc(100% - 4px) calc(100% - 4px), calc(100% - 4px) 100%,
          4px 100%, 4px calc(100% - 4px), 0px calc(100% - 4px)
        );
      }
      
      /* --- Texture Classes --- */
      .bg-felt {
        background-color: #234f32;
        background-image: 
            radial-gradient(transparent 0%, rgba(0,0,0,0.4) 100%),
            repeating-linear-gradient(45deg, transparent 0, transparent 1px, rgba(255,255,255,0.03) 1px, rgba(255,255,255,0.03) 2px);
      }

      .bg-wood {
        background-color: #5d4037;
        background-image: repeating-linear-gradient(90deg, rgba(0,0,0,0.1) 0, rgba(0,0,0,0.1) 2px, transparent 2px, transparent 8px);
        border: 4px solid #3e2723;
      }

      .bg-paper {
        background-color: #e3dac9;
        color: #3e2723;
      }

      /* --- Animations --- */

      /* Card Entry - Player (From Right-Center to Bottom-Center) */
      @keyframes deal-player-enter {
        0% { 
            opacity: 0; 
            transform: translate(40vw, -40vh) scale(0.5) rotate(15deg); 
        }
        100% { 
            opacity: 1; 
            transform: translate(0, 0) scale(1) rotate(0deg); 
        }
      }
      .animate-deal-player {
        animation: deal-player-enter 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      /* Card Entry - Enemy (From Right-Center to Top-Center) */
      @keyframes deal-enemy-enter {
        0% { 
            opacity: 0; 
            transform: translate(40vw, 40vh) scale(0.5) rotate(15deg); 
        }
        100% { 
            opacity: 1; 
            transform: translate(0, 0) scale(1) rotate(0deg); 
        }
      }
      .animate-deal-enemy {
        animation: deal-enemy-enter 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      /* ITEM Entry - Player (From Deck Area to Bottom Left) */
      @keyframes deal-item-player {
        0% { 
            opacity: 0; 
            transform: translate(50vw, -50vh) scale(0.2) rotate(45deg); 
        }
        100% { 
            opacity: 1; 
            transform: translate(0, 0) scale(1.1) rotate(0deg); 
        }
      }
      .animate-deal-item-player {
        animation: deal-item-player 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }

      /* ITEM Entry - Enemy (From Deck Area to Top Right) */
      @keyframes deal-item-enemy {
        0% { 
            opacity: 0; 
            transform: translate(-20vw, 50vh) scale(0.2) rotate(-45deg); 
        }
        100% { 
            opacity: 1; 
            transform: translate(0, 0) scale(0.9) rotate(0deg); 
        }
      }
      .animate-deal-item-enemy {
        animation: deal-item-enemy 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }

      /* Environment Card Enter (From Right to Center) */
      @keyframes env-enter {
        0% { 
            opacity: 0; 
            transform: translate(45vw, 0) scale(0.2) rotate(15deg); 
        }
        100% { 
            opacity: 1; 
            transform: translate(0, 0) scale(2.5) rotate(0deg); 
        }
      }
      .animate-env-enter {
        animation: env-enter 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      /* Environment Card Exit (From Center to Left) */
      @keyframes env-exit {
        0% { 
            opacity: 1; 
            transform: translate(0, 0) scale(2.5) rotate(0deg); 
        }
        100% { 
            opacity: 0; 
            transform: translate(-45vw, 0) scale(1.0) rotate(-10deg); 
        }
      }
      .animate-env-exit {
        animation: env-exit 0.5s ease-in forwards;
      }
      
      /* Environment Card Pulse (While held) */
      @keyframes env-pulse {
        0%, 100% { transform: scale(2.5); filter: brightness(1); }
        50% { transform: scale(2.6); filter: brightness(1.2); }
      }
      .animate-env-pulse {
        animation: env-pulse 2s infinite ease-in-out;
      }

      /* Generic Fade In (Fallback) */
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .animate-fade-in {
        animation: fade-in 0.3s ease-out;
      }

      /* Screen Shake (Damage) - Standard */
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20% { transform: translateX(-10px) rotate(-2deg); }
        40% { transform: translateX(10px) rotate(2deg); }
        60% { transform: translateX(-5px) rotate(-1deg); }
        80% { transform: translateX(5px) rotate(1deg); }
      }
      .animate-shake {
        animation: shake 0.4s ease-in-out;
      }

      /* Intense Shake (Heavy Damage) */
      @keyframes shake-hard {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        10% { transform: translate(-15px, -15px) rotate(-5deg); }
        20% { transform: translate(15px, 15px) rotate(5deg); }
        30% { transform: translate(-15px, 15px) rotate(-5deg); }
        40% { transform: translate(15px, -15px) rotate(5deg); }
        50% { transform: translate(-8px, 0px) rotate(-2deg); }
        60% { transform: translate(8px, 0px) rotate(2deg); }
        80% { transform: translate(0, 0) rotate(0); }
      }
      .animate-shake-hard {
        animation: shake-hard 0.5s cubic-bezier(.36,.07,.19,.97) both;
      }

      /* Flash Red (Damage) */
      @keyframes flash-red {
        0%, 100% { background-color: transparent; }
        20% { background-color: rgba(139, 0, 0, 0.5); }
        100% { background-color: transparent; }
      }
      .animate-flash-red {
        animation: flash-red 0.5s ease-out;
      }

      /* Flash Green (Heal) */
      @keyframes flash-green {
        0%, 100% { background-color: transparent; }
        50% { background-color: rgba(34, 197, 94, 0.3); }
      }
      .animate-flash-green {
        animation: flash-green 0.5s ease-in-out;
      }
      
      /* Pulse Blue (Shield) -> Changed to Iron/Grey for Western */
      @keyframes pulse-shield {
        0%, 100% { box-shadow: inset 0 0 0 0 rgba(115, 115, 115, 0); }
        50% { box-shadow: inset 0 0 50px 10px rgba(115, 115, 115, 0.3); }
      }
      .animate-pulse-blue {
        animation: pulse-shield 0.6s ease-in-out;
      }

      /* Score Pop */
      @keyframes score-pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.3); filter: brightness(1.3); }
        100% { transform: scale(1); filter: brightness(1); }
      }
      .animate-score-pop {
        animation: score-pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      /* Score Intensity Animations */
      @keyframes subtle-pulse {
        0%, 100% { transform: scale(1); filter: brightness(1); box-shadow: 0 0 15px rgba(245, 158, 11, 0.5); }
        50% { transform: scale(1.05); filter: brightness(1.2); box-shadow: 0 0 25px rgba(245, 158, 11, 0.8); }
      }
      .animate-subtle-pulse {
        animation: subtle-pulse 2s infinite ease-in-out;
      }

      @keyframes intense-beat {
        0%, 100% { transform: scale(1.1); filter: brightness(1.3); box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); border-color: rgba(255, 215, 0, 0.8); }
        50% { transform: scale(1.15); filter: brightness(1.6); box-shadow: 0 0 40px rgba(255, 215, 0, 1); border-color: rgba(255, 215, 0, 1); }
      }
      .animate-intense-beat {
        animation: intense-beat 0.8s infinite ease-in-out;
      }

      /* Floating Damage Number */
      @keyframes float-damage {
        0% { opacity: 0; transform: translate(-50%, 0) scale(0.5); }
        10% { opacity: 1; transform: translate(-50%, -20px) scale(1.5); }
        80% { opacity: 1; transform: translate(-50%, -50px) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -80px) scale(0.8); }
      }
      .animate-float-damage {
        animation: float-damage 4s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
      }

      /* Floating Damage Number - Side (No Centering) */
      @keyframes float-damage-side {
        0% { opacity: 0; transform: translate(0, 0) scale(0.5); }
        10% { opacity: 1; transform: translate(0, -20px) scale(1.5); }
        80% { opacity: 1; transform: translate(0, -50px) scale(1); }
        100% { opacity: 0; transform: translate(0, -80px) scale(0.8); }
      }
      .animate-float-damage-side {
        animation: float-damage-side 4s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
      }

      /* Letter Jitter/Float */
      @keyframes letter-jitter {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(-1px, 1px) rotate(-1deg); }
        50% { transform: translate(1px, -1px) rotate(1deg); }
        75% { transform: translate(-1px, -1px) rotate(-1deg); }
      }
      .animate-letter-jitter {
        display: inline-block;
        animation: letter-jitter 3s ease-in-out infinite;
      }

      /* --- Hand Avatar Animations (Unchanged mostly) --- */
      
      /* Idle - Subtle Breathing */
      @keyframes hand-idle {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(8px) rotate(2deg); }
      }
      .anim-hand-idle { 
        animation: hand-idle 4s ease-in-out infinite; 
      }

      /* Hit - Reach up to right (Deck), grab, pull back */
      @keyframes hand-hit {
        0% { transform: translate(0,0) rotate(0deg); }
        30% { transform: translate(10%, -25%) rotate(-5deg); } /* Reach */
        50% { transform: translate(10%, -28%) rotate(-5deg) scale(0.95); } /* Grab */
        100% { transform: translate(0,0) rotate(0deg); } /* Return */
      }
      .anim-hand-hit { 
        animation: hand-hit 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); 
      }

      @keyframes hand-hit-enemy {
        0% { transform: translate(0,0) rotate(0deg); }
        30% { transform: translate(-10%, -25%) rotate(5deg); } 
        50% { transform: translate(-10%, -28%) rotate(5deg) scale(0.95); } 
        100% { transform: translate(0,0) rotate(0deg); } 
      }
      .anim-hand-hit-enemy { 
        animation: hand-hit-enemy 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); 
      }

      /* Stand - Halt gesture / Tap table */
      @keyframes hand-stand {
        0% { transform: translate(0,0); }
        25% { transform: translate(0, -10%) rotate(-10deg); }
        40% { transform: translate(0, 5%) rotate(5deg); } /* Tap Down */
        100% { transform: translate(0,0); }
      }
      .anim-hand-stand {
        animation: hand-stand 0.6s ease-out;
      }

      /* Use Item - Reach left */
      @keyframes hand-use {
        0% { transform: translate(0,0); }
        30% { transform: translate(-60%, -10%) rotate(-15deg); } /* Reach Left */
        50% { transform: translate(-65%, -5%) rotate(-20deg); } /* Press/Drop */
        100% { transform: translate(0,0); }
      }
      .anim-hand-use {
        animation: hand-use 0.8s ease-in-out;
      }

      /* Hurt - Shake/Recoil */
      @keyframes hand-hurt {
        0% { transform: translate(0,0); filter: grayscale(0); }
        10%, 90% { transform: translate(-5px, 5px); filter: sepia(1) hue-rotate(-50deg) saturate(3); }
        20%, 80% { transform: translate(5px, -5px); }
        30%, 50%, 70% { transform: translate(-10px, 0); }
        40%, 60% { transform: translate(10px, 0); }
        100% { transform: translate(0,0); filter: grayscale(0); }
      }
      .anim-hand-hurt {
        animation: hand-hurt 0.6s cubic-bezier(.36,.07,.19,.97) both;
      }

      /* Leave/Retreat - Player slides down */
      @keyframes hand-leave {
          0% { transform: translateY(0); opacity: 1; }
          100% { transform: translateY(100%); opacity: 0; }
      }
      .anim-hand-leave {
          animation: hand-leave 1s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

      /* 
         Leave/Retreat - Enemy slides up.
         NOTE: Since the enemy container is rotated 180deg, 
         Positive Y translation (Down relative to element) becomes Global UP.
         So we use translateY(100%) to move it "off screen up".
      */
      @keyframes hand-leave-enemy {
          0% { transform: translateY(0); opacity: 1; }
          100% { transform: translateY(100%); opacity: 0; }
      }
      .anim-hand-leave-enemy {
          animation: hand-leave-enemy 1s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

      /* --- 3D Flip Utilities --- */
      .perspective-1000 {
        perspective: 1000px;
      }
      .preserve-3d {
        transform-style: preserve-3d;
      }
      .backface-hidden {
        backface-visibility: hidden;
      }
      .rotate-y-180 {
        transform: rotateY(180deg);
      }
      .rotate-y-0 {
        transform: rotateY(0deg);
      }

      /* --- CLASH ANIMATIONS --- */
      @keyframes clash-move-player {
        0% { top: 75%; left: 50%; transform: translate(-50%, 0) scale(1); }
        50% { top: 50%; left: 40%; transform: translate(-50%, -50%) scale(1.5); }
        100% { top: 50%; left: 40%; transform: translate(-50%, -50%) scale(1.5); }
      }
      .animate-clash-move-player {
        animation: clash-move-player 2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      }

      @keyframes clash-move-enemy {
        0% { top: 15%; left: 50%; transform: translate(-50%, 0) scale(1); }
        50% { top: 50%; left: 60%; transform: translate(-50%, -50%) scale(1.5); }
        100% { top: 50%; left: 60%; transform: translate(-50%, -50%) scale(1.5); }
      }
      .animate-clash-move-enemy {
        animation: clash-move-enemy 2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      }

      /* Collision Flash */
      @keyframes clash-impact {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
        50% { opacity: 1; transform: translate(-50%, -50%) scale(2); background-color: rgba(255,255,255,0.8); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(3); background-color: transparent; }
      }
      .animate-clash-impact {
        animation: clash-impact 0.5s ease-out forwards;
      }
      
      /* Danger Pulse (Health Bar) */
      @keyframes danger-pulse {
        0%, 100% { background-color: #7f1d1d; } /* dark red */
        50% { background-color: #b91c1c; box-shadow: 0 0 15px #ef4444; }
      }
      .animate-danger-pulse {
        animation: danger-pulse 0.6s infinite ease-in-out;
      }

      /* Item Activation Effect */
      @keyframes item-fly-center-player {
        0% { transform: translate(-40vw, 40vh) scale(0.5) rotate(-20deg); opacity: 0.8; }
        60% { transform: translate(0, 0) scale(2.0) rotate(5deg); opacity: 1; }
        80% { transform: translate(0, 0) scale(1.8) rotate(-2deg); opacity: 1; }
        100% { transform: translate(0, 0) scale(2.0) rotate(0deg); opacity: 1; }
      }
      .animate-item-fly-player {
        animation: item-fly-center-player 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards;
      }

      @keyframes item-fly-center-enemy {
        0% { transform: translate(40vw, -40vh) scale(0.5) rotate(20deg); opacity: 0.8; }
        60% { transform: translate(0, 0) scale(2.0) rotate(-5deg); opacity: 1; }
        80% { transform: translate(0, 0) scale(1.8) rotate(2deg); opacity: 1; }
        100% { transform: translate(0, 0) scale(2.0) rotate(0deg); opacity: 1; }
      }
      .animate-item-fly-enemy {
        animation: item-fly-center-enemy 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards;
      }

      @keyframes item-use-fade {
         0% { transform: scale(2.0); opacity: 1; filter: brightness(1); }
         100% { transform: scale(2.5); opacity: 0; filter: brightness(2); }
      }
      .animate-item-use-fade {
          animation: item-use-fade 0.5s ease-out forwards;
      }

      @keyframes item-shine {
        0% { transform: translateX(-100%) skewX(-15deg); }
        100% { transform: translateX(200%) skewX(-15deg); }
      }
      .animate-shine {
        animation: item-shine 0.8s ease-in-out infinite;
      }

      @keyframes victory-bg-flash {
          0% { background-color: #1b2e1f; }
          20% { background-color: #fcd34d; }
          100% { background-color: #271c19; }
      }
      .animate-victory-bg-flash {
          animation: victory-bg-flash 1.5s ease-out forwards;
      }

      @keyframes victory-text-in {
          0% { opacity: 0; transform: scale(0.5) translateY(50px); filter: blur(10px); }
          60% { opacity: 1; transform: scale(1.2) translateY(0); filter: blur(0); }
          80% { transform: scale(0.9); }
          100% { transform: scale(1); }
      }
      .animate-victory-text-in {
          animation: victory-text-in 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }

      /* --- BATTLE ENTRANCE/EXIT ANIMATIONS --- */

      @keyframes slide-in-top {
        0% { transform: translateY(-100%); opacity: 0; }
        100% { transform: translateY(0); opacity: 1; }
      }
      .slide-in-top {
        animation: slide-in-top 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      @keyframes slide-in-bottom {
        0% { transform: translateY(100%); opacity: 0; }
        100% { transform: translateY(0); opacity: 1; }
      }
      .slide-in-bottom {
        animation: slide-in-bottom 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      @keyframes slide-in-left {
        0% { transform: translate(-100%, -50%); opacity: 0; }
        100% { transform: translate(-50%, -50%); opacity: 1; }
      }
      .slide-in-left {
        /* Note: Centered elements usually use translate(-50%, -50%). 
           So we start from (-100%, -50%) which is left-off-screen */
        animation: slide-in-left 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }
      
      @keyframes slide-in-right {
        0% { transform: translate(100%, -50%); opacity: 0; }
        100% { transform: translate(50%, -50%); opacity: 1; }
      }
      .slide-in-right {
         /* Note: Centered elements usually use translate(50%, -50%). 
           So we start from (100%, -50%) which is right-off-screen */
        animation: slide-in-right 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      /* EXIT ANIMATIONS (Reverse) */
      @keyframes slide-out-top {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(-100%); opacity: 0; }
      }
      .slide-out-top {
        animation: slide-out-top 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

      @keyframes slide-out-bottom {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(100%); opacity: 0; }
      }
      .slide-out-bottom {
        animation: slide-out-bottom 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

      @keyframes slide-out-left {
        0% { transform: translate(-50%, -50%); opacity: 1; }
        100% { transform: translate(-100%, -50%); opacity: 0; }
      }
      .slide-out-left {
        animation: slide-out-left 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

      @keyframes slide-out-right {
        0% { transform: translate(50%, -50%); opacity: 1; }
        100% { transform: translate(100%, -50%); opacity: 0; }
      }
      .slide-out-right {
        animation: slide-out-right 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
      }

    </style>
  <script type="importmap">
{
  "imports": {
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>