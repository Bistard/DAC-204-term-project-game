# 《Last Hand》Game Proposal（游戏设计蓝图）

## 1. 游戏总体概念（Game Overview）

### 核心体验概述

《Last Hand》是一款围绕简化扑克牌机制构建的 **回合制对战 + 关卡制闯关（Run）** 非对称信息游戏。玩家在充满西部酒馆氛围的世界中，通过一局又一局的牌桌决斗，与性格各异的敌人交锋，在高风险规则体系下积累金币、获取道具，并尝试走得尽可能远。

核心体验可以概括为三点：

- 在“要不要再抽一张牌”的张力中做出高风险决策；
- 在不断变化的环境规则（环境卡）、惩罚条款（惩罚卡）和战术道具之间寻找组合，形成多层博弈；
- 通过连续闯关与元进程升级（生命上限、背包容量），构建越来越稳健、选择空间越来越大的成长路线。

### 核心玩法循环（Core Loop）

游戏的核心循环分为 Run、Battle 和 Round 三个层级。

- **Run（一次完整闯关）**：玩家从主菜单进入，开始一次新的 Run，依次挑战一系列关卡。每一关都是一场 Battle，胜利后进入奖励和升级，再推进到更高楼层。当玩家生命值归零或到达终点时，本次 Run 结束。
- **Battle（单场战斗）**：每场 Battle 对应一名敌人和一组固定的环境规则与惩罚规则，由若干 Round 组成。每个 Round 都是一次完整的“比点数 → 结算伤害”的过程，战斗在任一方生命值耗尽时结束，胜者获得通关奖励。
- **Round（单个回合）**：双方从共享牌堆抽牌，以尽量接近目标分数且不爆牌为目标。玩家和敌人轮流执行 **Hit（抽牌）**、**Stand（停牌）** 和 **使用道具**，当双方都选择 Stand 或一方爆牌时，本回合进入结算，并按惩罚规则结算伤害与治疗。

整体 Core Loop 可以概括为：

> 菜单 → 选择开始 Run →【战斗（若干回合）→ 胜利 → 奖励 → 下一关】× N → Run 结束

### 玩家动机

玩家的动机可以分为即时、中程和长程三个层面。

- **即时动机（单回合）**：尽可能赢下当前 Round，避免爆牌造成严重损失；在有限信息下利用道具、环境与惩罚规则，放大本回合的收益。
- **中程动机（单场战斗）**：在多回合中稳定管理自己的生命与护盾，限制敌人的回复与爆发，通过连胜、分差伤害等机制尽快击溃敌人，同时避免被对方的反扑击倒。
- **长程动机（Run 与元进程）**：挑战更高楼层、更强敌人与更苛刻的规则组合，通过金币升级生命上限与背包容量，解锁更安全、更灵活的开局条件。

### 游戏风格与主题

游戏整体采用 **西部边境 + 酒馆赌桌** 主题。主菜单以西部小镇的酒馆外景为中心：木制建筑、SALOON 招牌、风滚草与远山；战斗界面以厚重的木桌为主视觉，配合皮革、金属铆钉和纸质告示牌，各类卡牌与 UI 元素以旧纸、木板、马鞍包等符号强调“赌徒”“赏金猎人”的生活方式。

氛围偏向“紧张但略带戏谑”的高风险赌博体验：玩家在一次次“最后一手牌”的博弈中，既可能迎来暴富般的完美胜利，也可能因为一个错误决定当场破产。

### 概念设计

> **Demo link**：  
> https://blackjack-v0-4-complete-menuscreen-before-environ-196564664072.us-west1.run.app/

![Homepage](./pic/homepage.png)

![battle](./pic/battle-screenshot.png)

![battle](./pic/items.png)

![battle](./pic/environments.png)

![battle](./pic/penalty.png)

## 2. 叙事与世界观（Story & Narrative）

### 世界观背景

虽然游戏并未采用线性剧本叙述，但通过视觉与文案可以抽象出这样一个世界观：故事发生在由边境荒地与零散小镇构成的地区，法律松散，赌桌本身就是规则的化身。各路“客人”——从普通旅人到职业赌徒——都在这里押上自己的财富与命运。

### 玩家扮演的角色

玩家扮演一名长期混迹于 Last Hand 酒馆的 **职业赌徒 / 赏金猎人**。他（她）已经在无数牌桌上累积经验，对牌型、概率和对手心理十分敏锐，却不满足于小赌小赢，而是希望通过一次又一次高风险 Run 挑战越来越危险的对手与规则，以换取更丰厚的赏金与名声。所有的 Meta 升级（生命上限、背包容量、金币存量）都可以被视作这名赌徒长期生涯的“积累与刻痕”。

### 敌人

敌人以拟人化或符号化角色呈现，例如：

- **贪婪者类**：会持续抽牌直到非常接近目标分数，典型形象为“贪得无厌的幽灵赌徒”等；
- **防御者类**：在较低分数时就选择停牌，更注重安全与稳定；
- **随机者类**：行为高度不可预测，时而激进时而保守，代表混沌、心态失衡或缺乏经验的新手。

不同 AI 风格让玩家感受到截然不同的压力：有的对手“永远想再抽一张”，容易爆牌但一旦成功就能造成巨大伤害；有的对手谨小慎微，不常失误，却也难以打出致命一击；还有的对手完全不按常理出牌，迫使玩家放弃精确预测其行为，更多回到自身牌面与全局规则的判断。

## 3. 角色与敌人设计（Characters & Enemies）

### 玩家（Player）

#### 行为逻辑

战斗中，玩家围绕三种核心行为不断做出决策：抽牌（Hit）、停牌（Stand）和使用道具（Use Item）。抽牌会从共享牌堆顶部获取一张新牌加入手牌，伴随“先盖牌、后翻牌”的演出节奏以强化悬念感，抽牌完成后立即重算分数并通常切换行动权。停牌则表示本回合不再抽牌，锁定当前分数，把行动权交给对手，当双方都停牌后，本回合立刻进入结算。使用道具时，玩家从背包中选择一张道具卡打出，立即改变手牌、分数、伤害结算方式或生命值，道具通常一次性消耗，并在短时间内锁定其他操作以突出其重要性。

#### 状态系统与属性

玩家在战斗中的关键属性包括：生命值与上限（HP / Max HP，用于衡量可承受的总损失）、护盾（在结算伤害时优先被消耗，护盾耗尽后才会扣减生命）、手牌与分数（当前回合已抽到的牌及其点数总和）、背包与背包容量（可持有的道具数量上限）。在 Run 之间，玩家还拥有一组元进程属性：金币（用于在升级界面购买长期升级）、生命升级等级（决定每次 Run 的初始生命上限）、背包升级等级（决定每次 Run 的初始背包容量以及起始道具数量）。

### 敌人（Enemies）

#### 敌人行为模型

敌人在战斗中拥有与玩家相同的基础行为集合（Hit / Stand / 可能的道具使用），但完全由 AI 决策。敌人会根据自身当前分数、目标分数和环境规则估算继续抽牌的风险，并在不同 AI 风格下表现出不同的风险偏好：贪婪型倾向于在高分区间继续抽牌，只要尚未危险地逼近爆牌线；防御型则在较低分数时就选择停牌，更看重稳定与不爆牌；随机型在临界区间内的行为更加不可预测，时而明智、时而疯狂。每当轮到敌人行动时，会插入短暂的“思考延迟”，营造对手犹豫、权衡的节奏感。

#### 敌人属性与差异点

敌人的战斗属性与玩家基本一致：拥有生命值与上限、护盾值、手牌与分数以及背包与背包容量。区别在于，敌人的生命与护盾会随关卡层数和难度逐步提升；敌人的背包与道具目前主要用于体现“敌人也有资源”，并为未来扩展“敌人用牌策略”预留空间；敌人行为完全由 AI 驱动，玩家无法直接干预，但可以通过道具与环境规则间接影响敌人的处境，例如强制抽牌、撤销敌人最后一张牌或交换双方的最后一张牌。

## 4. 核心玩法机制（Core Gameplay Mechanics）

### 回合结构（Round System）

#### 抽牌与发牌流程

每一回合开始时，系统会先清理上一回合残留的临时状态，重置伤害修饰、免疫效果和临时目标分数，确保新的 Round 在干净、公平的状态下开始。随后构建当前回合使用的牌堆（1–10 + A，共 11 张），若有环境效果会移除部分牌，则在回合开始前随机禁用相应数量的牌，并在 UI 中以“打叉的牌”提示。最后系统发放起始手牌，双方从新牌堆中轮流抽牌（如“玩家–敌人–玩家–敌人”各两张），玩家起始手牌全部为明牌，敌人手牌中至少保留一张盖牌，其余为明牌，以制造信息差。

在自己的行动阶段，玩家可在 Hit 与 Stand 之间权衡。点击 Hit 后，从牌堆抽一张牌并立即更新分数，随后通常轮到对手行动；若对手已停牌，则可能继续由玩家行动。点击 Stand 则表示本回合不再抽牌，锁定当前分数并把行动权交给对手，当双方都处于 Stand 状态时，回合立刻进入结算。

在战斗中，玩家需要综合评估多方面信息来决定 Hit 还是 Stand：包括自己当前分数与目标分数的差距，Deck Tracker 显示的剩余点数分布，对手已知与未知分数以及其行为风格（贪婪、防御、随机），以及当前惩罚规则与环境规则对“输掉这一回合代价”的放大程度。

#### 结算流程与爆牌处理

当双方都 Stand 时，本回合进入结算。首先翻开敌人的盖牌，双方手牌完全可见，并按照当前目标分数与 A 的取值规则计算双方最终分数。随后判断爆牌与胜负：若某方分数超过目标分数，或命中特殊爆牌值（例如由环境指定的 17 / 18），则视为爆牌；若双方都爆牌，则本回合平局；若只有一方爆牌，则未爆牌的一方获胜；若双方都未爆牌，则分数高者获胜，分数相同则为平局。胜负确定后，依照当前惩罚卡的规则对双方生命与护盾进行伤害与治疗结算。

### Battle 系统（Battle System）

#### 战斗初始化

每场 Battle 开始时，系统会选定本关敌人，抽取若干环境卡与一张惩罚卡，形成本场战斗的“全局规则组合”，并重置玩家与敌人的手牌、分数、护盾以及回合计数。首场战斗作为 Run 的引导关卡，环境与惩罚组合相对温和；随层数提升，组合会变得更为严苛，例如自动抽牌、额外伤害或猝死阈值等。

#### 环境卡与惩罚卡的作用

在一场 Battle 中，环境卡决定整场对局的规则框架，而惩罚卡负责定义每一回合输赢的具体代价。环境卡通常作用于整场战斗，可以影响目标分数与计分规则（包括 A 的逻辑与特殊爆牌值）、牌堆规模和自动抽牌次数、完美结算时的额外奖励、道具可用性以及低 HP 猝死阈值等。惩罚卡则只在回合结算瞬间生效，规定当前回合输赢双方应承担的伤害与治疗，并可能维护跨回合的连胜次数等状态，从而让惩罚效果在多回合中演化。两者共同构成一套“赛场规则 + 裁判条款”，既塑造整体节奏与风险门槛，又精确定义每一回合的输赢成本。

#### 战斗胜负与奖励流程

当任一方生命值降至 0 或以下时，Battle 立即结束。若敌人死亡，当前 Battle 宣告胜利，系统触发敌人被击败的奖励逻辑，向玩家发放基础赏金和随关卡层数递增的额外金币，随后进入 Victory 画面，再进到奖励界面选择道具。若玩家死亡，则 Battle 失败，本次 Run 即刻结束，进入 Game Over 画面，并展示玩家本次 Run 达到的最高楼层与累积金币情况。战斗胜利后，奖励阶段允许玩家从随机生成的一组选项中挑选若干道具加入背包（受背包容量限制），离开奖励界面后进入下一层关卡，开始新的 Battle。

### Run 系统（Run System）

#### 线性楼层推进

当前 Run 结构采用 **线性楼层推进**。Run 从第 1 层开始，每次战斗胜利后楼层加一，新楼层会生成更强的敌人和新的环境 / 惩罚组合，金币与元进程升级在整个 Run 过程中持续累积。难度随着楼层数单调上升，自然划分为“初期–中期–后期”三个阶段，每一层都有新的战术挑战（不同敌人 + 不同规则组合）。

在一次典型 Run 中，可以抽象出以下节奏：早期关卡中，环境与惩罚组合较为温和，玩家主要在熟悉规则与界面，有限的道具卡已经能支撑简单的战术尝试；中期关卡里，敌人生命上限提高，环境开始引入自动抽牌、猝死阈值等高压元素，惩罚规则可能使用连胜加伤、按分差伤害等形式，使得每个 Round 的损失都格外痛苦，玩家必须谨慎选择何时追求 Perfect、何时保守止损；到后期关卡，玩家生命值与护盾在数场高压对局后已被严重消耗，环境可能叠加多种负面规则，容错空间极小，在惩罚与环境双重叠加下，任何一次爆牌或判断失误都可能直接终结本次 Run。

## 5. 卡牌与素材设计（Materials & Assets）

### 道具卡（Item Cards）

道具卡是游戏中最重要的战术资源之一，均为一次性消耗卡。总体上，道具效果被严格限定在 **回合内或回合结算层级** 起作用，不直接改变闯关结构本身，使它们更像是“战术工具箱”，而非单纯的数值放大器。

主要道具类型包括：

- **治疗与防护类**：提供直接治疗（例如恢复固定生命）、伤害缓冲（在本回合结算时抵消一部分伤害）或本回合伤害免疫，常用于在高风险操作前为自己上保险，或在猝死阈值附近回到安全区。
- **基于背包规模的治疗类**：按照当前持有的道具数恢复等量生命，鼓励在 Run 中构建“囤积流”，通过堆叠道具在关键节点实现大额回复。
- **抽牌优化类**：包括“最优抽牌”（在当前牌堆中模拟候选牌并选出最接近目标分数的一张）和“指定点数抽牌”（尝试直接抽到某个点数，例如精确补 3 点或补 A），显著提高抽牌的确定性，是技术玩家的重要工具。
- **目标分数与回合条件改写类**：在本回合临时改变目标分数（例如从 18 改到 24），或附带额外条件（如“若未爆牌则提高对输家的伤害”），用于在原有胜利条件不利时，通过改写规则重新定义“赢一回合”的含义。
- **牌面操作与信息重构类**：交换双方最后一张牌、撤销本方或敌人最后一次抽牌、替换自己最后一张牌等，用于局部扭转不利抽牌或抹去对方的极佳抽牌，同时保持整局牌池演化的可追踪性。
- **强制对手行动类**：例如强制对手立即抽一张牌并翻开，常用于在对手已处于危险分数区间时逼其爆牌。
- **以生命换资源类**：通过付出生命来换取牌面或道具资源，例如“立即抽取 2 张随机道具卡，但自己承受 2 点伤害”，鼓励在血量健康时进行主动自损换资源的高风险操作。
- **生命汲取与随机效果类**：从对手身上扣除少量生命并等量治疗自己，或随机借用其他道具效果，以增强 Run 的不可预测性与戏剧性。

### 环境卡（Environment Cards）

环境卡扮演“公告牌”的角色，用来描述整场战斗的规则特例。设计目标是在不改变核心“比点数”玩法的前提下，通过全局规则的多样化，让每一场 Battle 的风格和难度都截然不同。

环境卡主要在以下维度上产生影响：

- **目标分数与计分规则**：调整默认目标分数（例如从标准值随机改为 18、24 或 27），指定 A 始终记为 11 或允许其在 1 / 11 之间灵活调整，并设定特定分值（例如 17、18）也被视为爆牌。
- **牌堆规模与抽牌节奏**：在回合开始前随机禁用若干牌以减小牌堆规模，或在每回合自动为双方各发若干张牌，加快博弈节奏，从而改变记牌难度与风险曲线。
- **奖励与道具规则**：例如每次完美命中目标分数时额外赠送一张道具卡，或完全禁止使用道具卡，迫使玩家回到纯粹的 Hit / Stand 对决。
- **胜负与死亡规则**：引入“低于等于某 HP 即触发突然死亡”的额外败北条件，把对局从传统的“缓慢磨血”转变为更具爆发性的“高压博弈”。

### 惩罚卡（Penalty Cards）

惩罚卡可以理解为“本桌赌局的罚则条款”，专门定义 **每一回合输赢的具体代价**。它们只在回合结算瞬间生效，不改变回合内的抽牌与停牌逻辑，却会强烈影响玩家对每一回合风险的评估。

典型惩罚类型包括：

- **固定伤害**：只要有明确输家，就对其施加固定点数伤害，是最基础、最易理解的规则。
- **随回合数递增**：随 Battle 进行，基准惩罚伤害线性上升，迫使双方尽快结束战斗，避免过度拖延带来的极高代价。
- **分差伤害**：输家所受伤害等于双方分数差距，鼓励在已有优势时继续追求更大分差，提高高分追求的收益上限。
- **伤害 + 治疗混合**：在对输家造成伤害的同时，为胜者恢复少量生命，强调“赢下回合”对长期血线管理的积极作用。
- **连胜叠加**：基础伤害固定，若同一方连续多回合获胜，则额外增加伤害，平局或输掉回合会重置连胜与叠加伤害，使比赛逐步进入高压状态。

### 扑克牌本体（1–10 + A）

#### 点数与牌堆设计

本游戏采用单花色的简化扑克牌，牌面仅包含数字 1–10 与 A，共 11 张，没有 J、Q、K 等人头牌。A 的基础点数为 11，在部分规则下可自动回退为 1。这样的设计让牌堆规模小、组成固定，方便记牌与概率估算，玩家可以在极短时间内理解所有牌面可能的组合与风险。

#### 共享卡池与战术深度

玩家与敌人共享同一套 11 张牌的牌堆，并在 Battle 中不断洗牌与禁用部分牌。任一方抽到的牌都会减少另一方未来的抽牌空间；通过游戏内的 Deck Tracker，玩家可以清楚看到哪些点数已经出现在桌上、哪些被环境禁用了、哪些仍在牌堆中。多数道具只影响最近几次抽牌（例如撤销、替换、交换），而不会回溯整场对局，从而保持牌池演化的可追踪性。

在简单的“比点数”框架内，这一小规模共享卡池配合明确信息展示，引入了相当可观的记牌与概率博弈深度。

## 6. 游戏的独特性与设计理念（Uniqueness & Rationale）

### 规则可变的环境系统

本游戏最突出的特点之一，是通过环境卡实现的 **战斗规则可配置化**。每一场 Battle 都由一组不同的环境规则组合定义，它们可以同时改变目标分数、A 的逻辑、爆牌阈值、牌堆结构、自动抽牌次数、道具可用性乃至死亡条件。玩家在开始每一场战斗时，必须先阅读并理解这组“公告”，再围绕它们设计整场玩法。相比固定规则，这种做法大幅提升了重玩性与策略多样性：同样的道具组合，在不同环境之下可能产生截然不同的效果与风险评估。

### 惩罚系统与连胜压力

惩罚卡把“这一回合输掉”的后果，从简单的输赢结果提升为带有个性化惩罚曲线的复杂代价：有的规则鼓励尽早结束战斗（回合越久惩罚越重），有的规则鼓励拉大分差（分差越大惩罚越重），有的规则通过连胜叠加伤害让比赛进入高压状态，还有的规则会在胜者与输家之间重新分配生命与资源。

在这样的系统下，回合不再只是“赢了就好”，而是引导玩家思考：“我是否要承担爆牌风险，去换取更高的分差伤害？”、“在连胜惩罚逐渐加重时，是不是应该主动放弃一回合来重置压力？”

### 轻量但有深度的道具战术

道具系统坚持两个核心原则：**效果简洁易懂，但组合后要有深度；尽量围绕现有规则做“二次加工”，而不是引入完全独立的新系统**。因此，大多数道具都围绕几个核心方向设计：改变抽牌期望值（最优抽牌、指定点数抽牌）、操纵最近几张牌的出入与归属（交换、撤销、替换）、调整下一次回合结算时的伤害与治疗分配（缓冲、加成、免疫、对输家额外加伤），以及以生命为代价换取更多牌面选择与后续治疗可能等。

玩家不需要记住复杂的数值，只需通过少量关键字和图标就能理解每张道具的作用；但在多种道具、环境与惩罚交织下，依然可以构建出极具辨识度的战术体系。

### Roguelite 结构与元进程

通过 Run 概念与元进程升级，本游戏在单局对战之上叠加了一层轻量 Roguelite 结构。单次 Run 的结果会影响下一次 Run 的起点强度，玩家可以选择把金币用于即时的道具购买（若未来加入商店节点）或长期的生命 / 背包升级。随着升级逐步完成，玩家会发现自己能够应对更苛刻的环境与惩罚组合，从而探索更高楼层。

这种结构既满足喜欢短时间、快速对局的玩家（可以只专注于一场 Battle 或一整次 Run），也满足喜欢长期积累与构筑的玩家（通过多次 Run 慢慢堆叠成长路线）。

### 共享牌池与信息可见性

与许多只在内部共享牌堆却不明确展示状态的设计不同，本游戏使用小规模、固定组成的牌堆，并提供显式的牌池跟踪界面（Deck Tracker），让记牌不再只是“高玩技巧”，而是所有玩家都能直接利用的信息资产。想要仅凭概率感与直觉游玩的玩家，可以顺畅地进行 Hit / Stand 决策；想要精算的玩家，则可以系统地记牌、推算剩余牌型，甚至结合道具构建精密战术，从而在同一套规则下支持不同深度的玩法需求。

出极具辨识度的战术体系。

### Roguelite 结构与元进程

通过 Run 概念与元进程升级，本游戏在单局对战之上叠加了一层轻量 Roguelite：

- 单次 Run 的结果影响玩家在下一次 Run 中的起点强度；
- 玩家可以选择把金币用于立即的道具购买（若未来加入商店节点）或长期的生命 / 背包升级；
- 随着升级逐步完成，玩家会发现自己能够应对更苛刻的环境与惩罚组合，从而探索更高楼层。

这种结构同时满足：

- 喜欢短时间、快速对局的玩家：可以只专注于一次 Battle 或单次 Run；
- 喜欢长期积累与构筑的玩家：可以通过多次 Run 慢慢堆叠成长路线。

### 共享牌池

与很多只在内部共享牌堆却不明确展示状态的设计不同，本游戏通过：

- 小规模、固定组成的牌堆；
- 显式的牌池跟踪界面（Deck Tracker）；

让记牌不再只是“高玩技巧”，而是所有玩家都可以直接利用的信息。这使得：
- 想要 purely 依靠概率感的玩家可以凭直觉操作；
- 想要精算的玩家可以系统地记牌、推算剩余牌型，甚至结合道具构建精密战术。
出极具辨识度的战术体系。

### Roguelite 结构与元进程

通过 Run 概念与元进程升级，本游戏在单局对战之上叠加了一层轻量 Roguelite：

- 单次 Run 的结果影响玩家在下一次 Run 中的起点强度；
- 玩家可以选择把金币用于立即的道具购买（若未来加入商店节点）或长期的生命 / 背包升级；
- 随着升级逐步完成，玩家会发现自己能够应对更苛刻的环境与惩罚组合，从而探索更高楼层。

这种结构同时满足：

- 喜欢短时间、快速对局的玩家：可以只专注于一次 Battle 或单次 Run；
- 喜欢长期积累与构筑的玩家：可以通过多次 Run 慢慢堆叠成长路线。

### 共享牌池

与很多只在内部共享牌堆却不明确展示状态的设计不同，本游戏通过：

- 小规模、固定组成的牌堆；
- 显式的牌池跟踪界面（Deck Tracker）；

让记牌不再只是“高玩技巧”，而是所有玩家都可以直接利用的信息。这使得：
- 想要 purely 依靠概率感的玩家可以凭直觉操作；
- 想要精算的玩家可以系统地记牌、推算剩余牌型，甚至结合道具构建精密战术。
